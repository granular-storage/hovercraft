./tlc.py sim MC.tla
TLC2 Version 2.20 of Day Month 20?? (rev: bacd9d2)
Running Random Simulation with seed 3256642878034163804 with 16 workers on 16 cores with 7282MB heap and 4096MB offheap memory [pid: 1411] (Mac OS X 13.0 x86_64, Oracle Corporation 17.0.10 x86_64).
Parsing file /Users/ocm/Documents/granular-storage/raft.tla/hovercraftPP/MC.tla
Parsing file /Users/ocm/Documents/granular-storage/raft.tla/hovercraftPP/hovercraft.tla
Parsing file /private/var/folders/vc/w8dx7mbn7bd4nw40z9z7qszm0000gn/T/tlc-851381669254142135/TLC.tla (jar:file:/Users/ocm/Documents/granular-storage/raft.tla/hovercraftPP/tla2tools.jar!/tla2sany/StandardModules/TLC.tla)
Parsing file /private/var/folders/vc/w8dx7mbn7bd4nw40z9z7qszm0000gn/T/tlc-851381669254142135/_TLCTrace.tla (jar:file:/Users/ocm/Documents/granular-storage/raft.tla/hovercraftPP/tla2tools.jar!/tla2sany/StandardModules/_TLCTrace.tla)
Parsing file /private/var/folders/vc/w8dx7mbn7bd4nw40z9z7qszm0000gn/T/tlc-851381669254142135/Naturals.tla (jar:file:/Users/ocm/Documents/granular-storage/raft.tla/hovercraftPP/tla2tools.jar!/tla2sany/StandardModules/Naturals.tla)
Parsing file /private/var/folders/vc/w8dx7mbn7bd4nw40z9z7qszm0000gn/T/tlc-851381669254142135/FiniteSets.tla (jar:file:/Users/ocm/Documents/granular-storage/raft.tla/hovercraftPP/tla2tools.jar!/tla2sany/StandardModules/FiniteSets.tla)
Parsing file /private/var/folders/vc/w8dx7mbn7bd4nw40z9z7qszm0000gn/T/tlc-851381669254142135/Sequences.tla (jar:file:/Users/ocm/Documents/granular-storage/raft.tla/hovercraftPP/tla2tools.jar!/tla2sany/StandardModules/Sequences.tla)
Parsing file /private/var/folders/vc/w8dx7mbn7bd4nw40z9z7qszm0000gn/T/tlc-851381669254142135/TLCExt.tla (jar:file:/Users/ocm/Documents/granular-storage/raft.tla/hovercraftPP/tla2tools.jar!/tla2sany/StandardModules/TLCExt.tla)
Parsing file /private/var/folders/vc/w8dx7mbn7bd4nw40z9z7qszm0000gn/T/tlc-851381669254142135/Integers.tla (jar:file:/Users/ocm/Documents/granular-storage/raft.tla/hovercraftPP/tla2tools.jar!/tla2sany/StandardModules/Integers.tla)
Semantic processing of module Naturals
Semantic processing of module Sequences
Semantic processing of module FiniteSets
Semantic processing of module TLC
Semantic processing of module hovercraft
Semantic processing of module Integers
Semantic processing of module TLCExt
Semantic processing of module _TLCTrace
Semantic processing of module MC
Starting... (2025-06-18 09:18:22)
"MyInit: switchIndex=\"r1\""
"MyInit: netAggIndex=\"r2\""
"MyInit: Leader is=\"r3\""
"MyInit: Servers={\"r3\", \"r4\", \"r5\"}"
Computed 1 initial states...
Finished computing initial states: 1 distinct state generated at 2025-06-18 09:18:22.
Error: Invariant LeaderCommitted is violated.
Error: The behavior up to this point is:
State 1: <MyInit line 386, col 5 to line 447, col 30 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = <<>>
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [r1 |-> <<>>, r2 |-> <<>>, r3 |-> <<>>, r4 |-> <<>>, r5 |-> <<>>]
/\ switchSentRecord = [r1 |-> {}, r2 |-> {}, r3 |-> {}, r4 |-> {}, r5 |-> {}]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = <<>>
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 0
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = <<>>
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [r1 |-> {}, r2 |-> {}, r3 |-> {}, r4 |-> {}, r5 |-> {}]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 2: <MySwitchPlusPlusNext line 1084, col 7 to line 1085, col 67 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = <<>>
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [r1 |-> <<>>, r2 |-> <<>>, r3 |-> <<>>, r4 |-> <<>>, r5 |-> <<>>]
/\ switchSentRecord = [r1 |-> {}, r2 |-> {}, r3 |-> {}, r4 |-> {}, r5 |-> {}]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = <<>>
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 0
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = (<<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"])
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [r1 |-> {<<"v1", 2>>}, r2 |-> {}, r3 |-> {}, r4 |-> {}, r5 |-> {}]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 3: <MySwitchPlusPlusNext line 1084, col 7 to line 1085, col 67 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = <<>>
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [r1 |-> <<>>, r2 |-> <<>>, r3 |-> <<>>, r4 |-> <<>>, r5 |-> <<>>]
/\ switchSentRecord = [r1 |-> {}, r2 |-> {}, r3 |-> {}, r4 |-> {}, r5 |-> {}]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = <<>>
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 0
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [r1 |-> {<<"v1", 2>>, <<"v10", 2>>}, r2 |-> {}, r3 |-> {}, r4 |-> {}, r5 |-> {}]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 4: <MySwitchPlusPlusNext line 1087, col 7 to line 1088, col 55 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = <<>>
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [r1 |-> <<>>, r2 |-> <<>>, r3 |-> <<>>, r4 |-> <<>>, r5 |-> <<>>]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v10", 2>>},
  r4 |-> {<<"v10", 2>>},
  r5 |-> {<<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = <<>>
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 0
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {<<"v10", 2>>},
  r4 |-> {<<"v10", 2>>},
  r5 |-> {<<"v10", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 5: <MySwitchPlusPlusNext line 1090, col 7 to line 1091, col 64 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = <<>>
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v10", 2>>},
  r4 |-> {<<"v10", 2>>},
  r5 |-> {<<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = (<<1, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE])
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 1
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v10", 2>>},
  r5 |-> {<<"v10", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 6: <MySwitchPlusPlusNext line 1094, col 7 to line 1095, col 53 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v10", 2>>},
  r4 |-> {<<"v10", 2>>},
  r5 |-> {<<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = (<<1, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE])
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 1
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v10", 2>>},
  r5 |-> {<<"v10", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 7: <MySwitchPlusPlusNext line 1097, col 7 to line 1098, col 82 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v10", 2>>},
  r4 |-> {<<"v10", 2>>},
  r5 |-> {<<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = (<<1, 2>> :> [sentCount |-> 2, ackCount |-> 0, committed |-> FALSE])
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 1
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 1,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v10", 2>>},
  r5 |-> {<<"v10", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 8: <MySwitchPlusPlusNext line 1084, col 7 to line 1085, col 67 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v10", 2>>},
  r4 |-> {<<"v10", 2>>},
  r5 |-> {<<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = (<<1, 2>> :> [sentCount |-> 2, ackCount |-> 0, committed |-> FALSE])
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 1
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 1,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v10", 2>>},
  r5 |-> {<<"v10", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 9: <MySwitchPlusPlusNext line 1102, col 7 to line 1104, col 18 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |-> <<>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v10", 2>>},
  r4 |-> {<<"v10", 2>>},
  r5 |-> {<<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = (<<1, 2>> :> [sentCount |-> 2, ackCount |-> 0, committed |-> FALSE])
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 1
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 1,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {},
  r5 |-> {<<"v10", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 10: <MySwitchPlusPlusNext line 1087, col 7 to line 1088, col 55 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |-> <<>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = (<<1, 2>> :> [sentCount |-> 2, ackCount |-> 0, committed |-> FALSE])
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 1
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 1,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {<<"v8", 2>>},
  r4 |-> {<<"v8", 2>>},
  r5 |-> {<<"v8", 2>>, <<"v10", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 11: <MySwitchPlusPlusNext line 1102, col 7 to line 1104, col 18 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |-> <<>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = (<<1, 2>> :> [sentCount |-> 2, ackCount |-> 0, committed |-> FALSE])
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 1
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 1,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {<<"v8", 2>>},
  r4 |-> {<<"v8", 2>>},
  r5 |-> {<<"v8", 2>>, <<"v10", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 12: <MySwitchPlusPlusNext line 1094, col 7 to line 1095, col 53 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |-> <<>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = (<<1, 2>> :> [sentCount |-> 2, ackCount |-> 0, committed |-> FALSE])
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 1
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 1,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {<<"v8", 2>>},
  r4 |-> {<<"v8", 2>>},
  r5 |-> {<<"v8", 2>>, <<"v10", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 13: <MySwitchPlusPlusNext line 1084, col 7 to line 1085, col 67 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |-> <<>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = (<<1, 2>> :> [sentCount |-> 2, ackCount |-> 0, committed |-> FALSE])
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 1
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 1,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {<<"v8", 2>>},
  r4 |-> {<<"v8", 2>>},
  r5 |-> {<<"v8", 2>>, <<"v10", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 14: <MySwitchPlusPlusNext line 1102, col 7 to line 1104, col 18 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = (<<1, 2>> :> [sentCount |-> 2, ackCount |-> 0, committed |-> FALSE])
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 1
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 1,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {<<"v8", 2>>},
  r4 |-> {<<"v8", 2>>},
  r5 |-> {<<"v8", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 15: <MySwitchPlusPlusNext line 1097, col 7 to line 1098, col 82 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = (<<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> FALSE])
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 1
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 1,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {<<"v8", 2>>},
  r4 |-> {<<"v8", 2>>},
  r5 |-> {<<"v8", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 16: <MySwitchPlusPlusNext line 1087, col 7 to line 1088, col 55 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = (<<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> FALSE])
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 1
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 1,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {<<"v6", 2>>, <<"v8", 2>>},
  r4 |-> {<<"v6", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v6", 2>>, <<"v8", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 17: <MySwitchPlusPlusNext line 1087, col 7 to line 1088, col 55 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = (<<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> FALSE])
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 1
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 1,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 18: <MySwitchPlusPlusNext line 1094, col 7 to line 1095, col 53 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = (<<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> FALSE])
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 1
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 1,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 19: <MySwitchPlusPlusNext line 1106, col 7 to line 1109, col 44 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = (<<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> FALSE])
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 1
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 20: <MySwitchPlusPlusNext line 1139, col 7 to line 1140, col 57 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = (<<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> FALSE])
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 1
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 21: <MySwitchPlusPlusNext line 1090, col 7 to line 1091, col 64 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> FALSE] @@
  <<2, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 2
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {<<"v6", 2>>, <<"v8", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 22: <MySwitchPlusPlusNext line 1090, col 7 to line 1091, col 64 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> FALSE] @@
  <<2, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 3
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {<<"v8", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 23: <MySwitchPlusPlusNext line 1094, col 7 to line 1095, col 53 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> FALSE] @@
  <<2, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 3
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {<<"v8", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 24: <MySwitchPlusPlusNext line 1112, col 7 to line 1113, col 69 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 3
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {<<"v8", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 25: <MySwitchPlusPlusNext line 1090, col 7 to line 1091, col 64 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 26: <MySwitchPlusPlusNext line 1094, col 7 to line 1095, col 53 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mentryIndex |-> 2,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 27: <MySwitchPlusPlusNext line 1097, col 7 to line 1098, col 82 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mentryIndex |-> 2,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 1,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 28: <MySwitchPlusPlusNext line 1102, col 7 to line 1104, col 18 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mentryIndex |-> 2,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      0 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 1,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 29: <MySwitchPlusPlusNext line 1097, col 7 to line 1098, col 82 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 2, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 1,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ],
  [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 30: <MySwitchPlusPlusNext line 1112, col 7 to line 1113, col 69 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 2, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 1, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 1,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ],
  [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 31: <MySwitchPlusPlusNext line 1102, col 7 to line 1104, col 18 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 2, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 1, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 1,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ],
  [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v6", 2>>, <<"v8", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 32: <MySwitchPlusPlusNext line 1094, col 7 to line 1095, col 53 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mentryIndex |-> 2,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 2, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 1, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 1,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ],
  [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v6", 2>>, <<"v8", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 33: <MySwitchPlusPlusNext line 1139, col 7 to line 1140, col 57 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mentryIndex |-> 2,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 2, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 1, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 1,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ],
  [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v6", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 34: <MySwitchPlusPlusNext line 1097, col 7 to line 1098, col 82 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 1, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 1,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ],
  [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v6", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 35: <MySwitchPlusPlusNext line 1084, col 7 to line 1085, col 67 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 1, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 1,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ],
  [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v2", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v6", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 36: <MySwitchPlusPlusNext line 1112, col 7 to line 1113, col 69 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 1, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 1,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ],
  [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v2", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v6", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 37: <MySwitchPlusPlusNext line 1094, col 7 to line 1095, col 53 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mentryIndex |-> 2,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 1, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 1,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ],
  [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v2", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v6", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 38: <MySwitchPlusPlusNext line 1102, col 7 to line 1104, col 18 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mentryIndex |-> 2,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 1,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ],
  [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v2", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v6", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 39: <MySwitchPlusPlusNext line 1106, col 7 to line 1109, col 44 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mentryIndex |-> 2,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v2", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v6", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 40: <MySwitchPlusPlusNext line 1084, col 7 to line 1085, col 67 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mentryIndex |-> 2,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v6", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v6", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 41: <MySwitchPlusPlusNext line 1097, col 7 to line 1098, col 82 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 6, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v6", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v6", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 42: <MySwitchPlusPlusNext line 1084, col 7 to line 1085, col 67 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 6, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v6", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 43: <MySwitchPlusPlusNext line 1112, col 7 to line 1113, col 69 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 6, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v6", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 44: <MySwitchPlusPlusNext line 1084, col 7 to line 1085, col 67 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mentryIndex |-> 1,
    mcommitIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 6, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v6", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 45: <MySwitchPlusPlusNext line 1097, col 7 to line 1098, col 82 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 6, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 1,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ],
  [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v6", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 46: <MySwitchPlusPlusNext line 1102, col 7 to line 1104, col 18 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      0 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 6, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 1,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ],
  [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v6", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 47: <MySwitchPlusPlusNext line 1106, col 7 to line 1109, col 44 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 6, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v6", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 2]
/\ netAggCommitIndex = 1

State 48: <MySwitchPlusPlusNext line 1112, col 7 to line 1113, col 69 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 6, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v6", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 2]
/\ netAggCommitIndex = 1

State 49: <MySwitchPlusPlusNext line 1102, col 7 to line 1104, col 18 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      0 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |-> <<[term |-> 2, value |-> "v10", payload |-> "v10"]>>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 6, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v8", 2>>},
  r5 |-> {<<"v6", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 2]
/\ netAggCommitIndex = 1

State 50: <MySwitchPlusPlusNext line 1102, col 7 to line 1104, col 18 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      0 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 6, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v8", 2>>},
  r5 |-> {<<"v6", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 2]
/\ netAggCommitIndex = 1

State 51: <MySwitchPlusPlusNext line 1117, col 7 to line 1122, col 30 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      0 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 7, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v8", 2>>},
  r5 |-> {<<"v6", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 2]
/\ netAggCommitIndex = 1

State 52: <MySwitchPlusPlusNext line 1117, col 7 to line 1122, col 30 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      0 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 8, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v8", 2>>},
  r5 |-> {<<"v6", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 2]
/\ netAggCommitIndex = 1

State 53: <MySwitchPlusPlusNext line 1084, col 7 to line 1085, col 67 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      0 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 8, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v8", 2>>},
  r5 |-> {<<"v6", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 2]
/\ netAggCommitIndex = 1

State 54: <MySwitchPlusPlusNext line 1102, col 7 to line 1104, col 18 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      0 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 8, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v8", 2>>},
  r5 |-> {<<"v6", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 2]
/\ netAggCommitIndex = 1

State 55: <MySwitchPlusPlusNext line 1139, col 7 to line 1140, col 57 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      0 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 8, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v8", 2>>},
  r5 |-> {} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 2]
/\ netAggCommitIndex = 1

State 56: <MySwitchPlusPlusNext line 1112, col 7 to line 1113, col 69 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      0 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 8, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v8", 2>>},
  r5 |-> {} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 2]
/\ netAggCommitIndex = 1

State 57: <MySwitchPlusPlusNext line 1102, col 7 to line 1104, col 18 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      0 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 8, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v8", 2>>},
  r5 |-> {} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 2]
/\ netAggCommitIndex = 1

State 58: <MySwitchPlusPlusNext line 1094, col 7 to line 1095, col 53 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mentryIndex |-> 2,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      0 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 8, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v8", 2>>},
  r5 |-> {} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 2]
/\ netAggCommitIndex = 1

State 59: <MySwitchPlusPlusNext line 1112, col 7 to line 1113, col 69 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mentryIndex |-> 2,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      0 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 8, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 1, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v8", 2>>},
  r5 |-> {} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 2]
/\ netAggCommitIndex = 1

State 60: <MySwitchPlusPlusNext line 1102, col 7 to line 1104, col 18 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mentryIndex |-> 2,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v10"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      0 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 8, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 1, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v8", 2>>},
  r5 |-> {} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 2]
/\ netAggCommitIndex = 1

State 61: <MySwitchPlusPlusNext line 1097, col 7 to line 1098, col 82 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 10, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 1, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v8", 2>>},
  r5 |-> {} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 2]
/\ netAggCommitIndex = 1

State 62: <MySwitchPlusPlusNext line 1084, col 7 to line 1085, col 67 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 10, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 1, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v4", 2>> :> [term |-> 2, value |-> "v4", payload |-> "v4"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v4", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v8", 2>>},
  r5 |-> {} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 2]
/\ netAggCommitIndex = 1

State 63: <MySwitchPlusPlusNext line 1106, col 7 to line 1109, col 44 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 10, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 1, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v4", 2>> :> [term |-> 2, value |-> "v4", payload |-> "v4"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v4", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v8", 2>>},
  r5 |-> {} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 2]
/\ netAggCommitIndex = 2

State 64: <MySwitchPlusPlusNext line 1094, col 7 to line 1095, col 53 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mentryIndex |-> 2,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 10, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 1, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v4", 2>> :> [term |-> 2, value |-> "v4", payload |-> "v4"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v4", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v8", 2>>},
  r5 |-> {} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 2]
/\ netAggCommitIndex = 2

State 65: <MySwitchPlusPlusNext line 1139, col 7 to line 1140, col 57 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mentryIndex |-> 2,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 10, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 1, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v4", 2>> :> [term |-> 2, value |-> "v4", payload |-> "v4"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v4", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {},
  r5 |-> {} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 2]
/\ netAggCommitIndex = 2

State 66: <MySwitchPlusPlusNext line 1112, col 7 to line 1113, col 69 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 2 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mentryIndex |-> 2,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 10, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 1, r5 |-> 2]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v4", 2>> :> [term |-> 2, value |-> "v4", payload |-> "v4"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v4", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {},
  r5 |-> {} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 2]
/\ netAggCommitIndex = 2

State 67: <MySwitchPlusPlusNext line 1117, col 7 to line 1122, col 30 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 2 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mentryIndex |-> 2,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 11, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 1, r5 |-> 2]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v4", 2>> :> [term |-> 2, value |-> "v4", payload |-> "v4"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v4", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {},
  r5 |-> {} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 2]
/\ netAggCommitIndex = 2

State 68: <MySwitchPlusPlusNext line 1097, col 7 to line 1098, col 82 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 13, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 1, r5 |-> 2]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v4", 2>> :> [term |-> 2, value |-> "v4", payload |-> "v4"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v4", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {},
  r5 |-> {} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 2]
/\ netAggCommitIndex = 2

State 69: <MySwitchPlusPlusNext line 1102, col 7 to line 1104, col 18 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      0 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 13, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 1, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v4", 2>> :> [term |-> 2, value |-> "v4", payload |-> "v4"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v4", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {},
  r5 |-> {} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 2]
/\ netAggCommitIndex = 2

State 70: <MySwitchPlusPlusNext line 1094, col 7 to line 1095, col 53 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mentryIndex |-> 2,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      0 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 13, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 1, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v4", 2>> :> [term |-> 2, value |-> "v4", payload |-> "v4"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v4", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {},
  r5 |-> {} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 2]
/\ netAggCommitIndex = 2

State 71: <MySwitchPlusPlusNext line 1106, col 7 to line 1109, col 44 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mentryIndex |-> 2,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 13, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 1, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v4", 2>> :> [term |-> 2, value |-> "v4", payload |-> "v4"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v4", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {},
  r5 |-> {} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 2]
/\ netAggCommitIndex = 2

State 72: <MySwitchPlusPlusNext line 1087, col 7 to line 1088, col 55 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mentryIndex |-> 2,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 13, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 1, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v4", 2>> :> [term |-> 2, value |-> "v4", payload |-> "v4"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v4", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {<<"v5", 2>>},
  r4 |-> {<<"v5", 2>>},
  r5 |-> {<<"v5", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 2]
/\ netAggCommitIndex = 2

State 73: <MySwitchPlusPlusNext line 1097, col 7 to line 1098, col 82 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 15, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 1, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v4", 2>> :> [term |-> 2, value |-> "v4", payload |-> "v4"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v4", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {<<"v5", 2>>},
  r4 |-> {<<"v5", 2>>},
  r5 |-> {<<"v5", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 2]
/\ netAggCommitIndex = 2

State 74: <MySwitchPlusPlusNext line 1102, col 7 to line 1104, col 18 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 15, ackCount |-> 0, committed |-> FALSE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 1, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v4", 2>> :> [term |-> 2, value |-> "v4", payload |-> "v4"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v4", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {<<"v5", 2>>},
  r4 |-> {<<"v5", 2>>},
  r5 |-> {<<"v5", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 2]
/\ netAggCommitIndex = 2

State 75: <MySwitchPlusPlusNext line 1112, col 7 to line 1113, col 69 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 2 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 15, ackCount |-> 0, committed |-> TRUE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 2, r4 |-> 1, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 3, r5 |-> 3],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v4", 2>> :> [term |-> 2, value |-> "v4", payload |-> "v4"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v4", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {<<"v5", 2>>},
  r4 |-> {<<"v5", 2>>},
  r5 |-> {<<"v5", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 2]
/\ netAggCommitIndex = 2

State 76: <MySwitchPlusPlusNext line 1102, col 7 to line 1104, col 18 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 2 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 15, ackCount |-> 0, committed |-> TRUE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 2, r4 |-> 1, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 3, r5 |-> 3],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v4", 2>> :> [term |-> 2, value |-> "v4", payload |-> "v4"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v4", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {<<"v5", 2>>},
  r4 |-> {<<"v5", 2>>},
  r5 |-> {<<"v5", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 2]
/\ netAggCommitIndex = 2

State 77: <MySwitchPlusPlusNext line 1139, col 7 to line 1140, col 57 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 2 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 15, ackCount |-> 0, committed |-> TRUE] @@
  <<3, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 2, r4 |-> 1, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 3, r5 |-> 3],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v4", 2>> :> [term |-> 2, value |-> "v4", payload |-> "v4"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v4", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {<<"v5", 2>>},
  r4 |-> {<<"v5", 2>>},
  r5 |-> {} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 2]
/\ netAggCommitIndex = 2

State 78: <MySwitchPlusPlusNext line 1117, col 7 to line 1122, col 30 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 2 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 2,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v6"]>>,
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 15, ackCount |-> 0, committed |-> TRUE] @@
  <<3, 2>> :> [sentCount |-> 1, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 2, r4 |-> 1, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 3, r5 |-> 3],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v4", 2>> :> [term |-> 2, value |-> "v4", payload |-> "v4"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v4", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {<<"v5", 2>>},
  r4 |-> {<<"v5", 2>>},
  r5 |-> {} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 2]
/\ netAggCommitIndex = 2

State 79: <MySwitchPlusPlusNext line 1117, col 7 to line 1122, col 30 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 2 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 2,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v6"]>>,
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 15, ackCount |-> 0, committed |-> TRUE] @@
  <<3, 2>> :> [sentCount |-> 2, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 2, r4 |-> 1, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 4
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 3, r5 |-> 3],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v4", 2>> :> [term |-> 2, value |-> "v4", payload |-> "v4"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v4", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {<<"v5", 2>>},
  r4 |-> {<<"v5", 2>>},
  r5 |-> {} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 2]
/\ netAggCommitIndex = 2

State 80: <MySwitchPlusPlusNext line 1090, col 7 to line 1091, col 64 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 2 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 2,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v6"]>>,
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"],
         [term |-> 2, value |-> "v5", payload |-> "v5"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 15, ackCount |-> 0, committed |-> TRUE] @@
  <<3, 2>> :> [sentCount |-> 2, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<5, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 2, r4 |-> 1, r5 |-> 1]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 5
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 3, r5 |-> 3],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v4", 2>> :> [term |-> 2, value |-> "v4", payload |-> "v4"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v4", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v5", 2>>},
  r5 |-> {} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 2]
/\ netAggCommitIndex = 2

State 81: <MySwitchPlusPlusNext line 1112, col 7 to line 1113, col 69 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 2 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 2 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 2,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v6"]>>,
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"],
         [term |-> 2, value |-> "v5", payload |-> "v5"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 15, ackCount |-> 0, committed |-> TRUE] @@
  <<3, 2>> :> [sentCount |-> 2, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<5, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 2, r4 |-> 1, r5 |-> 2]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 5
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 3, r5 |-> 3],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v4", 2>> :> [term |-> 2, value |-> "v4", payload |-> "v4"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v4", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v5", 2>>},
  r5 |-> {} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 2]
/\ netAggCommitIndex = 2

State 82: <MySwitchPlusPlusNext line 1117, col 7 to line 1122, col 30 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 2 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 2 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 2,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v6"]>>,
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"],
           [term |-> 2, value |-> "v5", payload |-> "v5"] >>,
    mprevLogIndex |-> 2,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v6"]>>,
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"],
         [term |-> 2, value |-> "v5", payload |-> "v5"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 15, ackCount |-> 0, committed |-> TRUE] @@
  <<3, 2>> :> [sentCount |-> 3, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<5, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 2, r4 |-> 1, r5 |-> 2]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 5
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 3, r5 |-> 3],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v4", 2>> :> [term |-> 2, value |-> "v4", payload |-> "v4"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v4", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v5", 2>>},
  r5 |-> {} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 2]
/\ netAggCommitIndex = 2

State 83: <MySwitchPlusPlusNext line 1117, col 7 to line 1122, col 30 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 2 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 2 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 2,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v6"]>>,
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"],
           [term |-> 2, value |-> "v5", payload |-> "v5"] >>,
    mprevLogIndex |-> 2,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v6"]>>,
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"],
         [term |-> 2, value |-> "v5", payload |-> "v5"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 15, ackCount |-> 0, committed |-> TRUE] @@
  <<3, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<5, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 2, r4 |-> 1, r5 |-> 2]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 5
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 3, r5 |-> 3],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v4", 2>> :> [term |-> 2, value |-> "v4", payload |-> "v4"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v4", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v5", 2>>},
  r5 |-> {} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 2]
/\ netAggCommitIndex = 2

State 84: <MySwitchPlusPlusNext line 1102, col 7 to line 1104, col 18 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 2 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 2 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 2,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v6"]>>,
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"],
           [term |-> 2, value |-> "v5", payload |-> "v5"] >>,
    mprevLogIndex |-> 2,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v6"]>>,
    mcommitIndex |-> 2 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"],
         [term |-> 2, value |-> "v5", payload |-> "v5"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 15, ackCount |-> 0, committed |-> TRUE] @@
  <<3, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<5, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 2, r4 |-> 1, r5 |-> 2]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 5
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 3, r5 |-> 3],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v4", 2>> :> [term |-> 2, value |-> "v4", payload |-> "v4"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v4", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v5", 2>>},
  r5 |-> {} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 2]
/\ netAggCommitIndex = 2

State 85: <MySwitchPlusPlusNext line 1112, col 7 to line 1113, col 69 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r3",
    mcommitIndex |-> 2 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r4",
    mcommitIndex |-> 2 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AggCommit,
    msource |-> "r2",
    mdest |-> "r5",
    mcommitIndex |-> 2 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> FALSE,
    mmatchIndex |-> 0 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r5",
    mdest |-> "r3",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 2,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v6"]>>,
    mcommitIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r3",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"],
           [term |-> 2, value |-> "v5", payload |-> "v5"] >>,
    mprevLogIndex |-> 2,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v6"]>>,
    mcommitIndex |-> 2 ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v10", payload |-> "v10"],
           [term |-> 2, value |-> "v1", payload |-> "v1"],
           [term |-> 2, value |-> "v6", payload |-> "v6"],
           [term |-> 2, value |-> "v8", payload |-> "v8"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"],
         [term |-> 2, value |-> "v6", payload |-> "v6"],
         [term |-> 2, value |-> "v8", payload |-> "v8"],
         [term |-> 2, value |-> "v5", payload |-> "v5"] >>,
  r4 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v10", payload |-> "v10"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v5", 2>>, <<"v6", 2>>, <<"v8", 2>>, <<"v10", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 15, ackCount |-> 0, committed |-> TRUE] @@
  <<3, 2>> :> [sentCount |-> 4, ackCount |-> 0, committed |-> FALSE] @@
  <<4, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<5, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ netAggCurrentLeaderTerm = [term |-> 2, leader |-> "r3"]
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 5
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 3, r5 |-> 3],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] @@
  <<"v3", 2>> :> [term |-> 2, value |-> "v3", payload |-> "v3"] @@
  <<"v4", 2>> :> [term |-> 2, value |-> "v4", payload |-> "v4"] @@
  <<"v5", 2>> :> [term |-> 2, value |-> "v5", payload |-> "v5"] @@
  <<"v6", 2>> :> [term |-> 2, value |-> "v6", payload |-> "v6"] @@
  <<"v7", 2>> :> [term |-> 2, value |-> "v7", payload |-> "v7"] @@
  <<"v8", 2>> :> [term |-> 2, value |-> "v8", payload |-> "v8"] @@
  <<"v9", 2>> :> [term |-> 2, value |-> "v9", payload |-> "v9"] @@
  <<"v10", 2>> :> [term |-> 2, value |-> "v10", payload |-> "v10"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryIndex |-> 2,
    leaderId |-> "r3",
    entryTerm |-> 2,
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |->
      { <<"v1", 2>>,
        <<"v2", 2>>,
        <<"v3", 2>>,
        <<"v4", 2>>,
        <<"v5", 2>>,
        <<"v6", 2>>,
        <<"v7", 2>>,
        <<"v8", 2>>,
        <<"v9", 2>>,
        <<"v10", 2>> },
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v5", 2>>},
  r5 |-> {} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 2]
/\ netAggCommitIndex = 2

The number of states generated: 420451
Simulation using seed 3256642878034163804 and aril 0
Progress: 420501 states checked, 404 traces generated (trace length: mean=403, var(x)=15648, sd=125)
Finished in 07s at (2025-06-18 09:18:29)
Trace exploration spec path: ./MC_TTrace_1750231101.tla

hovercraft % ./tlc.py mc MC.tla
TLC2 Version 2.20 of Day Month 20?? (rev: bacd9d2)
Running breadth-first search Model-Checking with fp 63 and seed 4028719981898018982 with 16 workers on 16 cores with 7282MB heap and 4096MB offheap memory [pid: 30196] (Mac OS X 13.0 x86_64, Oracle Corporation 17.0.10 x86_64, MSBDiskFPSet, 
DiskStateQueue).
Parsing file /Users/ocm/Documents/granular-storage/raft.tla/hovercraftPP/MC.tla
Parsing file /Users/ocm/Documents/granular-storage/raft.tla/hovercraftPP/hovercraft.tla
Parsing file /private/var/folders/vc/w8dx7mbn7bd4nw40z9z7qszm0000gn/T/tlc-15247474586901811635/TLC.tla (jar:file:/Users/ocm/Documents/granular-storage/raft.tla/hovercraftPP/tla2tools.jar!/tla2sany/StandardModules/TLC.tla)
Parsing file /private/var/folders/vc/w8dx7mbn7bd4nw40z9z7qszm0000gn/T/tlc-15247474586901811635/_TLCTrace.tla (jar:file:/Users/ocm/Documents/granular-storage/raft.tla/hovercraftPP/tla2tools.jar!/tla2sany/StandardModules/_TLCTrace.tla)
Parsing file /private/var/folders/vc/w8dx7mbn7bd4nw40z9z7qszm0000gn/T/tlc-15247474586901811635/Naturals.tla (jar:file:/Users/ocm/Documents/granular-storage/raft.tla/hovercraftPP/tla2tools.jar!/tla2sany/StandardModules/Naturals.tla)
Parsing file /private/var/folders/vc/w8dx7mbn7bd4nw40z9z7qszm0000gn/T/tlc-15247474586901811635/FiniteSets.tla (jar:file:/Users/ocm/Documents/granular-storage/raft.tla/hovercraftPP/tla2tools.jar!/tla2sany/StandardModules/FiniteSets.tla)
Parsing file /private/var/folders/vc/w8dx7mbn7bd4nw40z9z7qszm0000gn/T/tlc-15247474586901811635/Sequences.tla (jar:file:/Users/ocm/Documents/granular-storage/raft.tla/hovercraftPP/tla2tools.jar!/tla2sany/StandardModules/Sequences.tla)
Parsing file /private/var/folders/vc/w8dx7mbn7bd4nw40z9z7qszm0000gn/T/tlc-15247474586901811635/TLCExt.tla (jar:file:/Users/ocm/Documents/granular-storage/raft.tla/hovercraftPP/tla2tools.jar!/tla2sany/StandardModules/TLCExt.tla)
Parsing file /private/var/folders/vc/w8dx7mbn7bd4nw40z9z7qszm0000gn/T/tlc-15247474586901811635/Integers.tla (jar:file:/Users/ocm/Documents/granular-storage/raft.tla/hovercraftPP/tla2tools.jar!/tla2sany/StandardModules/Integers.tla)
Semantic processing of module Naturals
Semantic processing of module Sequences
Semantic processing of module FiniteSets
Semantic processing of module TLC
Semantic processing of module hovercraft
Semantic processing of module Integers
Semantic processing of module TLCExt
Semantic processing of module _TLCTrace
Semantic processing of module MC
Starting... (2025-05-30 15:39:29)
Computing initial states...
"MyInit: switchIndex=\"r1\""
"MyInit: netAggIndex=\"r2\""
"MyInit: Leader is=\"r3\""
"MyInit: Servers={\"r3\", \"r4\", \"r5\"}"
Finished computing initial states: 1 distinct state generated at 2025-05-30 15:39:30.
Progress(19) at 2025-05-30 15:39:33: 108,026 states generated (108,026 s/min), 41,872 distinct states found (41,872 ds/min), 23,548 states left on queue.
Error: Invariant LeaderCommitted is violated.
"MyInit: switchIndex=\"r1\""
"MyInit: netAggIndex=\"r2\""
"MyInit: Leader is=\"r3\""
"MyInit: Servers={\"r3\", \"r4\", \"r5\"}"
Error: The behavior up to this point is:
State 1: <Initial predicate>
/\ netAggIndex = "r2"
/\ messages = <<>>
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [r1 |-> <<>>, r2 |-> <<>>, r3 |-> <<>>, r4 |-> <<>>, r5 |-> <<>>]
/\ switchSentRecord = [r1 |-> {}, r2 |-> {}, r3 |-> {}, r4 |-> {}, r5 |-> {}]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = <<>>
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 0
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = <<>>
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [r1 |-> {}, r2 |-> {}, r3 |-> {}, r4 |-> {}, r5 |-> {}]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 2: <MySwitchPlusPlusNext line 1045, col 7 to line 1046, col 67 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = <<>>
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [r1 |-> <<>>, r2 |-> <<>>, r3 |-> <<>>, r4 |-> <<>>, r5 |-> <<>>]
/\ switchSentRecord = [r1 |-> {}, r2 |-> {}, r3 |-> {}, r4 |-> {}, r5 |-> {}]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = <<>>
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 0
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = (<<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"])
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [r1 |-> {<<"v1", 2>>}, r2 |-> {}, r3 |-> {}, r4 |-> {}, r5 |-> {}]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 3: <MySwitchPlusPlusNext line 1045, col 7 to line 1046, col 67 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = <<>>
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [r1 |-> <<>>, r2 |-> <<>>, r3 |-> <<>>, r4 |-> <<>>, r5 |-> <<>>]
/\ switchSentRecord = [r1 |-> {}, r2 |-> {}, r3 |-> {}, r4 |-> {}, r5 |-> {}]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = <<>>
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 0
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [r1 |-> {<<"v1", 2>>, <<"v2", 2>>}, r2 |-> {}, r3 |-> {}, r4 |-> {}, r5 |-> {}]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 4: <MySwitchPlusPlusNext line 1051, col 7 to line 1052, col 55 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = <<>>
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [r1 |-> <<>>, r2 |-> <<>>, r3 |-> <<>>, r4 |-> <<>>, r5 |-> <<>>]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>},
  r4 |-> {<<"v1", 2>>},
  r5 |-> {<<"v1", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = <<>>
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 0
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>},
  r4 |-> {<<"v1", 2>>},
  r5 |-> {<<"v1", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 5: <MySwitchPlusPlusNext line 1051, col 7 to line 1052, col 55 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = <<>>
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [r1 |-> <<>>, r2 |-> <<>>, r3 |-> <<>>, r4 |-> <<>>, r5 |-> <<>>]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v2", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = <<>>
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 0
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v2", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 6: <MySwitchPlusPlusNext line 1054, col 7 to line 1055, col 64 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = <<>>
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> <<[term |-> 2, value |-> "v2", payload |-> "v2"]>>,
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v2", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = (<<1, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE])
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 1
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v2", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 7: <MySwitchPlusPlusNext line 1054, col 7 to line 1055, col 64 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = <<>>
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v2", payload |-> "v2"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v2", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<2, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 2
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v2", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 8: <MySwitchPlusPlusNext line 1058, col 7 to line 1059, col 53 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v2"]>>,
    mcommitIndex |-> 0,
    mentryIndex |-> 1 ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v2", payload |-> "v2"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v2", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<2, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 2
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v2", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 9: <MySwitchPlusPlusNext line 1065, col 7 to line 1066, col 82 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v2"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v2"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v2", payload |-> "v2"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v2", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<2, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 2
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryTerm |-> 2,
    entryIndex |-> 1,
    leaderId |-> "r3",
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v2", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 10: <MySwitchPlusPlusNext line 1069, col 7 to line 1071, col 18 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v2"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v2"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v2", payload |-> "v2"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r4 |-> <<[term |-> 2, value |-> "v2", payload |-> "v2"]>>,
  r5 |-> <<>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v2", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<2, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 2
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryTerm |-> 2,
    entryIndex |-> 1,
    leaderId |-> "r3",
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v2", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 11: <MySwitchPlusPlusNext line 1069, col 7 to line 1071, col 18 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 1 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v2"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v2"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v2", payload |-> "v2"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r4 |-> <<[term |-> 2, value |-> "v2", payload |-> "v2"]>>,
  r5 |-> <<>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v2", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<2, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 2
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryTerm |-> 2,
    entryIndex |-> 1,
    leaderId |-> "r3",
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v2", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ netAggCommitIndex = 0

State 12: <MySwitchPlusPlusNext line 1074, col 7 to line 1077, col 44 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r3", mcommitIndex |-> 1] :>
      1 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r4", mcommitIndex |-> 1] :>
      1 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r5", mcommitIndex |-> 1] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v2"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v2", payload |-> "v2"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r4 |-> <<[term |-> 2, value |-> "v2", payload |-> "v2"]>>,
  r5 |-> <<>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v2", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<2, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 2
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v2", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 13: <MySwitchPlusPlusNext line 1069, col 7 to line 1071, col 18 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r3", mcommitIndex |-> 1] :>
      1 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r4", mcommitIndex |-> 1] :>
      1 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r5", mcommitIndex |-> 1] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v2"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v2", payload |-> "v2"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r4 |-> <<[term |-> 2, value |-> "v2", payload |-> "v2"]>>,
  r5 |-> <<[term |-> 2, value |-> "v2", payload |-> "v2"]>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v2", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] @@
  <<2, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 2
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>},
  r5 |-> {<<"v1", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 14: <MySwitchPlusPlusNext line 1080, col 7 to line 1081, col 69 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r3", mcommitIndex |-> 1] :>
      0 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r4", mcommitIndex |-> 1] :>
      1 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r5", mcommitIndex |-> 1] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v2"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v2", payload |-> "v2"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r4 |-> <<[term |-> 2, value |-> "v2", payload |-> "v2"]>>,
  r5 |-> <<[term |-> 2, value |-> "v2", payload |-> "v2"]>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v2", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 2
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>},
  r5 |-> {<<"v1", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 15: <MySwitchPlusPlusNext line 1058, col 7 to line 1059, col 53 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r3", mcommitIndex |-> 1] :>
      0 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r4", mcommitIndex |-> 1] :>
      1 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r5", mcommitIndex |-> 1] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesNetAggRequest,
    msource |-> "r3",
    mdest |-> "r2",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    mentryIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v2"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v2", payload |-> "v2"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r4 |-> <<[term |-> 2, value |-> "v2", payload |-> "v2"]>>,
  r5 |-> <<[term |-> 2, value |-> "v2", payload |-> "v2"]>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v2", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 2
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>},
  r5 |-> {<<"v1", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 16: <MySwitchPlusPlusNext line 1065, col 7 to line 1066, col 82 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r4", mcommitIndex |-> 1] :>
      1 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r5", mcommitIndex |-> 1] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v2"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v2", payload |-> "v2"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r4 |-> <<[term |-> 2, value |-> "v2", payload |-> "v2"]>>,
  r5 |-> <<[term |-> 2, value |-> "v2", payload |-> "v2"]>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v2", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 2
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryTerm |-> 2,
    entryIndex |-> 2,
    leaderId |-> "r3",
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {<<"v1", 2>>},
  r5 |-> {<<"v1", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 17: <MySwitchPlusPlusNext line 1069, col 7 to line 1071, col 18 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r4", mcommitIndex |-> 1] :>
      1 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r5", mcommitIndex |-> 1] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v2"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v2", payload |-> "v2"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r4 |->
      << [term |-> 2, value |-> "v2", payload |-> "v2"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |-> <<[term |-> 2, value |-> "v2", payload |-> "v2"]>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v2", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 2
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryTerm |-> 2,
    entryIndex |-> 2,
    leaderId |-> "r3",
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {},
  r5 |-> {<<"v1", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 18: <MySwitchPlusPlusNext line 1069, col 7 to line 1071, col 18 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r4", mcommitIndex |-> 1] :>
      1 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r5", mcommitIndex |-> 1] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesResponse,
    msource |-> "r4",
    mdest |-> "r2",
    msuccess |-> TRUE,
    mmatchIndex |-> 2 ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r4",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v2"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v2", payload |-> "v2"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r4 |->
      << [term |-> 2, value |-> "v2", payload |-> "v2"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |-> <<[term |-> 2, value |-> "v2", payload |-> "v2"]>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v2", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 1, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 2
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] )
/\ netAggPendingEntries = { [ ackCount |-> 0,
    entryTerm |-> 2,
    entryIndex |-> 2,
    leaderId |-> "r3",
    acksFrom |-> {} ] }
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {},
  r5 |-> {<<"v1", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 1, r5 |-> 0]
/\ netAggCommitIndex = 1

State 19: <MySwitchPlusPlusNext line 1074, col 7 to line 1077, col 44 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r3", mcommitIndex |-> 2] :>
      1 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r4", mcommitIndex |-> 1] :>
      1 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r4", mcommitIndex |-> 2] :>
      1 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r5", mcommitIndex |-> 1] :>
      1 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r5", mcommitIndex |-> 2] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v2"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 1, r5 |-> 1],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v2", payload |-> "v2"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r4 |->
      << [term |-> 2, value |-> "v2", payload |-> "v2"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |-> <<[term |-> 2, value |-> "v2", payload |-> "v2"]>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v2", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> FALSE] )
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 1, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 2
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {},
  r5 |-> {<<"v1", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 0]
/\ netAggCommitIndex = 2

State 20: <MySwitchPlusPlusNext line 1080, col 7 to line 1081, col 69 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r3", mcommitIndex |-> 2] :>
      0 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r4", mcommitIndex |-> 1] :>
      1 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r4", mcommitIndex |-> 2] :>
      1 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r5", mcommitIndex |-> 1] :>
      1 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r5", mcommitIndex |-> 2] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v2"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v2", payload |-> "v2"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r4 |->
      << [term |-> 2, value |-> "v2", payload |-> "v2"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |-> <<[term |-> 2, value |-> "v2", payload |-> "v2"]>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v2", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> TRUE] )
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 2, r4 |-> 1, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 2
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 3, r5 |-> 3],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {},
  r5 |-> {<<"v1", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 0]
/\ netAggCommitIndex = 2

State 21: <MySwitchPlusPlusNext line 1080, col 7 to line 1081, col 69 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r3", mcommitIndex |-> 2] :>
      0 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r4", mcommitIndex |-> 1] :>
      1 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r4", mcommitIndex |-> 2] :>
      0 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r5", mcommitIndex |-> 1] :>
      1 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r5", mcommitIndex |-> 2] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v2"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v2", payload |-> "v2"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r4 |->
      << [term |-> 2, value |-> "v2", payload |-> "v2"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |-> <<[term |-> 2, value |-> "v2", payload |-> "v2"]>> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v2", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> TRUE] )
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 2, r4 |-> 2, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 2
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 3, r5 |-> 3],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [ r1 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r2 |-> {},
  r3 |-> {},
  r4 |-> {},
  r5 |-> {<<"v1", 2>>} ]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 0]
/\ netAggCommitIndex = 2

State 22: <MySwitchPlusPlusNext line 1069, col 7 to line 1071, col 18 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r3", mcommitIndex |-> 2] :>
      0 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r4", mcommitIndex |-> 1] :>
      1 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r4", mcommitIndex |-> 2] :>
      0 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r5", mcommitIndex |-> 1] :>
      1 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r5", mcommitIndex |-> 2] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v2"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v2", payload |-> "v2"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r4 |->
      << [term |-> 2, value |-> "v2", payload |-> "v2"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v2", payload |-> "v2"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v2", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> TRUE] )
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 2, r4 |-> 2, r5 |-> 0]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 2
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 3, r5 |-> 3],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [r1 |-> {<<"v1", 2>>, <<"v2", 2>>}, r2 |-> {}, r3 |-> {}, r4 |-> {}, r5 |-> {}]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 0]
/\ netAggCommitIndex = 2

State 23: <MySwitchPlusPlusNext line 1080, col 7 to line 1081, col 69 of module hovercraft>
/\ netAggIndex = "r2"
/\ messages = ( [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r3", mcommitIndex |-> 2] :>
      0 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r4", mcommitIndex |-> 1] :>
      1 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r4", mcommitIndex |-> 2] :>
      0 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r5", mcommitIndex |-> 1] :>
      1 @@
  [mtype |-> AggCommit, msource |-> "r2", mdest |-> "r5", mcommitIndex |-> 2] :>
      0 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 0,
    mprevLogTerm |-> 0,
    mentries |-> <<[term |-> 2, value |-> "v2"]>>,
    mcommitIndex |-> 0,
    moriginalLeader |-> "r3" ] :>
      1 @@
  [ mterm |-> 2,
    mtype |-> AppendEntriesRequest,
    msource |-> "r2",
    mdest |-> "r5",
    mlog |->
        << [term |-> 2, value |-> "v2", payload |-> "v2"],
           [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
    mprevLogIndex |-> 1,
    mprevLogTerm |-> 2,
    mentries |-> <<[term |-> 2, value |-> "v1"]>>,
    mcommitIndex |-> 1,
    moriginalLeader |-> "r3" ] :>
      1 )
/\ matchIndex = [ r1 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r2 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r3 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 2, r5 |-> 2],
  r4 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0],
  r5 |-> [r1 |-> 0, r2 |-> 0, r3 |-> 0, r4 |-> 0, r5 |-> 0] ]
/\ log = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |->
      << [term |-> 2, value |-> "v2", payload |-> "v2"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r4 |->
      << [term |-> 2, value |-> "v2", payload |-> "v2"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >>,
  r5 |->
      << [term |-> 2, value |-> "v2", payload |-> "v2"],
         [term |-> 2, value |-> "v1", payload |-> "v1"] >> ]
/\ switchSentRecord = [ r1 |-> {},
  r2 |-> {},
  r3 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r4 |-> {<<"v1", 2>>, <<"v2", 2>>},
  r5 |-> {<<"v1", 2>>, <<"v2", 2>>} ]
/\ state = [r1 |-> Switch, r2 |-> NetAgg, r3 |-> Leader, r4 |-> Follower, r5 |-> Follower]
/\ Servers = {"r3", "r4", "r5"}
/\ leaderCount = [r1 |-> 0, r2 |-> 0, r3 |-> 1, r4 |-> 0, r5 |-> 0]
/\ entryCommitStats = ( <<1, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> TRUE] @@
  <<2, 2>> :> [sentCount |-> 0, ackCount |-> 0, committed |-> TRUE] )
/\ commitIndex = [r1 |-> 0, r2 |-> 0, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ currentTerm = [r1 |-> 2, r2 |-> 2, r3 |-> 2, r4 |-> 2, r5 |-> 2]
/\ votesResponded = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchIndex = "r1"
/\ maxc = 2
/\ nextIndex = [ r1 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r2 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r3 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 3, r5 |-> 3],
  r4 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1],
  r5 |-> [r1 |-> 1, r2 |-> 1, r3 |-> 1, r4 |-> 1, r5 |-> 1] ]
/\ votesGranted = [r1 |-> {}, r2 |-> {}, r3 |-> {"r4", "r5"}, r4 |-> {}, r5 |-> {}]
/\ switchBuffer = ( <<"v1", 2>> :> [term |-> 2, value |-> "v1", payload |-> "v1"] @@
  <<"v2", 2>> :> [term |-> 2, value |-> "v2", payload |-> "v2"] )
/\ netAggPendingEntries = {}
/\ voterLog = [ r1 |-> <<>>,
  r2 |-> <<>>,
  r3 |-> [r4 |-> <<>>, r5 |-> <<>>],
  r4 |-> <<>>,
  r5 |-> <<>> ]
/\ votedFor = [r1 |-> "r3", r2 |-> "r3", r3 |-> Nil, r4 |-> "r3", r5 |-> "r3"]
/\ unorderedRequests = [r1 |-> {<<"v1", 2>>, <<"v2", 2>>}, r2 |-> {}, r3 |-> {}, r4 |-> {}, r5 |-> {}]
/\ netAggMatchIndex = [r3 |-> 0, r4 |-> 2, r5 |-> 0]
/\ netAggCommitIndex = 2

"MyInit: switchIndex=\"r1\""
"MyInit: netAggIndex=\"r2\""
"MyInit: Leader is=\"r3\""
"MyInit: Servers={\"r3\", \"r4\", \"r5\"}"
"MyInit: switchIndex=\"r1\""
"MyInit: netAggIndex=\"r2\""
"MyInit: Leader is=\"r3\""
"MyInit: Servers={\"r3\", \"r4\", \"r5\"}"
3602533 states generated, 1080766 distinct states found, 537406 states left on queue.
